<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Hockey Matches</title>
    <style>
       body {
        background-color: #0B2A33;
        margin: 0;
        }
        .div_title {
            background-color: #05161C;
            padding: 2%;
            margin-bottom: 4%;
        }
        .div_match {
            margin: 0 auto;
            margin-top: 1%;
            width: 60%;
            padding: 0.1%;
            border-radius: 20px;
            background-color: #05161C;
        }
        h1 {
            color: white;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="div_title" >
        <h1 class="title">Live Hockey Inline Matches Italy</h1>
    </div>

    <div id="matches"></div>

    <script>
            const socket = new WebSocket("ws://localhost:8000/ws");
            const container = document.getElementById("matches");
            let n_matches = 0;

            socket.onopen = () => {
                console.log("WebSocket aperto");
            };

            socket.onmessage = (event) => {
                const data = JSON.parse(event.data);

                if(data.phase_terminated){
                    container.innerHTML = "";
                    n_matches = data.n_matches;
                    for(let i=0; i < n_matches; i++) {
                        const div = document.createElement("div");
                        div.className = "div_match";
                        div.id = `div_${i + 1}`;
                        container.appendChild(div);
                        const div_content = document.createElement("h1");
                        div_content.className = "title";
                        div_content.id = `content_${i + 1}`;
                        div.appendChild(div_content);
                    }
                }
                else{
                    document.getElementById(data.content_id).innerHTML = `${data.time} - ${data.teams} - ${data.points}`;
                }




            };

            socket.onclose = () => {
                console.log("WebSocket chiuso");
            };

        </script>

</body>
</html>